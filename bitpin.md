🌐 Base URL
تمام درخواست‌های API باید به یکی از این آدرس‌ها ارسال بشه:

https://api.bitpin.ir
https://api.bitpin.org


اوردر بوک
👋 Introduction
اوردر بوک جاییه که می‌تونید سفارش‌های باز در هر یک از بازارهای بیت‌پین رو ببینید.
این سفارشات شامل لیست سفارش‌های خرید (bids) و فروش (asks) هست.

🔗 Endpoint
GET /api/v1/mth/orderbook/{symbol}/

⏱ Rate Limit
اطلاعیه
60 درخواست در دقیقه

📨 Request
برای دریافت سفارش‌های باز در هر یک از بازارهای بیت‌پین می‌تونید از این مسیر استفاده کنید. اوردر بوک شامل لیست سفارش‌های خرید (bids) و فروش (asks) است:

curl --location --request GET 'https://api.bitpin.org/api/v1/mth/orderbook/{symbol}/'  

💬 Success Response
اگه درخواست موفق باشه، پاسخ به شکل زیر خواهد بود:

{  
  "asks": [  
    ["51000", "2000.00000000"],  
    ["52000", "2000.00000000"],  
    ["52500", "1000.00000000"]  
  ],  
  "bids": [  
    ["50000", "1000.00000000"],  
    ["49500", "1000.00000000"],  
    ["49000", "1000.00000000"]  
  ]  
}  

هشدار
در هر درخواست تنها 20 ردیف از اوردر بوک پاسخ داده میشود.

🛠 Response Keys
توضیح کلیدهای پاسخ:

asks: لیست سفارش‌های فروش
bids: لیست سفارش‌های خرید
Additional Notes
استفاده از این مسیر بهتون کمک می‌کنه تا به‌روزترین اطلاعات سفارش‌های باز بازارها رو داشته باشید و بهترین تصمیم‌ها رو بگیرید.
با این درخواست، می‌تونید به‌طور مداوم اطلاعات دفتر سفارشات رو رصد کنید.


👋 مقدمه
با استفاده از Websocket API بیت‌پین، می‌توانید به آپدیت‌های بلادرنگ دسترسی پیدا کنید. این آپدیت‌ها شامل اطلاعات بازار، وضعیت سفارشات و معاملات کاربر است. تمام اطلاعاتی که از طریق REST API قابل دسترسی هستند، در Websocket API نیز موجود است. اما تفاوت اصلی در این است که Websocket به‌صورت بلادرنگ عمل می‌کند و تغییرات را بلافاصله به شما ارسال می‌کند.

با استفاده از وب‌سوکت می‌توانید به تعدادی از آپدیت‌ها و تغییرات به شکل نزدیک به زمان‌حقیقی (real-time) دسترسی داشته باشید. تمام این اطلاعات از طریق REST API بیت‌پین نیز قابل دسترسی است. به طور کلی وب‌سوکت آپدیت‌ها را در صورتی که تغییر رخ داده باشد ارسال می‌کند. به همین دلیل، در صورت لزوم می‌توانید وضعیت اولیه را از REST API و سپس آپدیت‌ها را از وب‌سوکت دریافت کنید.

🌐 Base URL
wss://ws.bitpin.ir

🔑 نکات کلیدی
اطلاعیه
برای اتصال به وب‌سوکت می‌توانید از هر یک از کلاینت‌های متداول استفاده کنید.
انواع مختلف پیام‌هایی که از طریق وب‌سوکت ارسال می‌شود، توضیح داده شده است. نیازی به ایجاد اتصال جدید برای هر بخش نیست. پیام‌های ارسال شده در وب‌سوکت دارای یک کلید event هستند که نوع پیام را مشخص می‌کند.
در صورتی که اتصال، به هر دلیلی، بسته شود، لازم است پیش از تلاش مجدد برای اتصال حداقل ۱۵ ثانیه صبر کنید.
توصیه می‌شود در صورت مشاهده‌ی نرخ بالای بسته شدن، وقفه‌ی بین تلاش‌های مجدد را به شکل پلکانی افزایش دهید.
در صورت استفاده نامتعارف، درخواست‌دهنده با محدودیت رو به رو خواهد شد.
🔄 مزایای استفاده از Websocket
سرعت بالا: به دلیل بلادرنگ بودن، وب‌سوکت به شما اجازه می‌دهد تا تغییرات بازار و سفارشات را سریع‌تر از REST API دریافت کنید.
بهینه‌سازی ترافیک: با استفاده از یک اتصال پایدار، حجم داده‌های ارسال شده کاهش می‌یابد.
استفاده آسان: می‌توانید از هر کلاینتی که از Websocket پشتیبانی می‌کند استفاده کنید.



Ping Pong
👋 مقدمه
برای حفظ ارتباط زنده با Websocket، لازم است هر 20 ثانیه یک پیام PING ارسال کنید. اگر تا 20 ثانیه پاسخی دریافت نکنید، باید اتصال را بسته و مجدد تلاش کنید.

📨 درخواست PING
{ 
    "message" : "PING" 
}

💬 پاسخ موفق PONG
{ 
    "message" : "PONG" 
}

اطلاعیه
ارسال پیام PING به طور منظم باعث حفظ ارتباط فعال و جلوگیری از قطع شدن ناگهانی ارتباط می‌شود. در صورت عدم دریافت پاسخ PONG در مدت زمان مشخص، اتصال را بسته و تلاش مجدد برای اتصال داشته باشید.


دریافت قیمت‌های بازار (Tickers)
👋 مقدمه
با ارسال پیام sub_to_tickers، می‌توانید اطلاعات قیمت‌های تمام بازارها را هر 5 ثانیه دریافت کنید. در صورت نیاز به قطع دریافت اطلاعات، پیام unsub_tickers ارسال کنید.

📨 درخواست ثبت‌نام برای دریافت قیمت‌ها
{ "method": "sub_to_tickers" }

💬 پاسخ ثبت‌نام موفق
{ "message": "sub to tickers" }

💹 پاسخ آپدیت قیمت‌ها
{
    "BTC_IRT": {
        "timestamp": 1646747693.366072, 
        "price": "1018041176", 
        "daily_change_price": -0.2399,
        "low": "975697937", 
        "high": "1028000000"
    },
    "event_time": "2024-08-14T14:37:54.487062Z",
    "event": "tickers_update"
}

📨 درخواست لغو دریافت قیمت‌ها
{ "method": "unsub_tickers" }

💬 پاسخ لغو موفق
{ "message": "unsub tickers" }

اطلاعیه
دریافت قیمت‌ها به‌صورت لحظه‌ای از طریق وب‌سوکت به شما کمک می‌کند که همیشه از آخرین تغییرات بازار باخبر باشید. با این حال، اگر نیازی به این اطلاعات نداشتید، بهتر است برای کاهش حجم داده‌ها و استفاده بهینه از منابع، درخواست لغو (unsub_tickers) ارسال کنید.


وضعیت بازار (Market Status)
👋 مقدمه
برای دریافت آپدیت‌های وضعیت بازار، پیام sub_to_market_data را ارسال کنید. این پیام می‌تواند شامل لیستی از بازارهایی باشد که می‌خواهید آپدیت‌های آن‌ها را دریافت کنید. در صورت ثبت‌نام موفق، دو نوع آپدیت دریافت خواهید کرد: آپدیت سفارش‌ها و آپدیت معاملات.

📨 درخواست ثبت‌نام برای وضعیت بازار
{"method":"sub_to_market_data", "symbols":["BTC_USDT", "BTC_IRT", "USDC_IRT"]}

💬 پاسخ ثبت‌نام موفق
{"message": "sub to markets ['BTC_USDT', 'BTC_IRT', 'USDC_IRT']"}

💹 پاسخ آپدیت سفارش‌ها
{
    "ask":[
        ["51000", "2000.00000000"],
        ["52000", "2000.00000000"],
        ["52500", "1000.00000000"]
    ],
    "bid": [
        ["50000", "1000.00000000"],
        ["49500", "1000.00000000"],
        ["49000", "1000.00000000"]
    ],
    "symbol": "BTC_IRT",
    "event_time": "2024-08-14T14:37:54.487062Z",
    "event": "market_data"
}

💹 پاسخ آپدیت معاملات
{
    "matches": [
        {"id": "73802972_73807087", "price": "1019000000", "base_amount": "0.01086870", 
        "quote_amount": "11075213", "side": "sell"},
        {"id": "73802711_73807087", "price": "1019000000", "base_amount": "0.00575072", 
        "quote_amount": "5859993","side": "sell"}
    ],
    "symbol": "BTC_IRT",
    "event_time": "2024-08-14T14:37:54.487062Z",
    "event": "matches_update"
}

اطلاعیه
با استفاده از این پیام‌ها، شما می‌توانید وضعیت لحظه‌ای بازار را به‌روزرسانی کنید و به تغییرات در لحظه پاسخ دهید. این امکان به شما اجازه می‌دهد تا در زمان مناسب تصمیم‌گیری کنید و معاملات خود را بهبود بخشید.